import{c as k,j as S,n as E,o as I,t as z,v as T}from"./chunk-H5J5N3NZ.js";import{H as n,I as o,Ma as _,Na as w,O as p,Oa as C,Pa as P,Qa as y,Ta as v,Ua as O,W as s,Y as u,Z as m,_ as f,ga as M,ja as x,u as c,v as l,x as b}from"./chunk-GTDSTCUU.js";import"./chunk-SGZQGHWM.js";import"./chunk-TAMHHTZL.js";import"./chunk-3WEH5MWB.js";import"./chunk-DBAIULDE.js";import"./chunk-A7AIC4LS.js";import"./chunk-T65MIE4K.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-FCVKYTBW.js";import"./chunk-REYR55MP.js";import"./chunk-GY7VVEAB.js";import"./chunk-42C7ZIID.js";import{e as h}from"./chunk-JHI3MBHO.js";var D=(()=>{let a=class a{constructor(e,i,t){this.http=e,this.router=i,this.alertController=t,this.username="",this.password="",this.errorMessage="",this.successMessage=""}login(){if(!this.username||!this.password){this.errorMessage="Debes llenar todos los campos",this.successMessage="";return}this.http.post("https://pulsenseback.onrender.com/login",{username:this.username,password:this.password}).subscribe({next:e=>{console.log("\u{1F4E6} Respuesta de login:",e),e&&e.success?(document.activeElement?.blur(),this.errorMessage="",this.successMessage="Inicio de sesi\xF3n exitoso",this.router.navigate(["/dashboard"])):(this.errorMessage=e.message||"Usuario o contrase\xF1a inv\xE1lidos",this.successMessage="")},error:e=>{console.error("\u274C Error en login:",e),this.errorMessage=e.error?.message||"Error del servidor",this.successMessage=""}})}register(){if(!this.username||!this.password){this.errorMessage="Debes llenar todos los campos para registrarte",this.successMessage="";return}this.http.post("https://pulsenseback.onrender.com/register",{username:this.username,password:this.password}).subscribe({next:e=>h(this,null,function*(){if(e.success){document.activeElement?.blur(),this.errorMessage="",this.successMessage="Usuario registrado correctamente";let i=yield this.alertController.create({header:"Registro exitoso",message:"Tu usuario ha sido creado correctamente. Puedes iniciar sesion ahora",buttons:[]});yield i.present(),setTimeout(()=>i.dismiss(),2500),setTimeout(()=>{this.successMessage="",this.router.navigate(["/login"])},2800)}else this.errorMessage=e.message||"Error al registrar",this.successMessage=""}),error:e=>{console.error("\u274C Error en registro:",e),this.errorMessage=e.error?.message||"Error del servidor",this.successMessage=""}})}};a.\u0275fac=function(i){return new(i||a)(l(M),l(x),l(z))},a.\u0275cmp=b({type:a,selectors:[["app-login"]],decls:19,vars:2,consts:[[1,"login-content"],[1,"login-wrapper"],["novalidate","",1,"login-card",3,"ngSubmit"],[1,"login-title"],[1,"login-subtitle"],[1,"input-item"],["position","floating"],["name","username","required","",3,"ngModelChange","ngModel"],["name","password","type","password","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"login-button"],["expand","block","fill","clear",1,"register-button",3,"click"]],template:function(i,t){i&1&&(n(0,"ion-content",0)(1,"div",1)(2,"form",2),p("ngSubmit",function(){return t.login()}),n(3,"h2",3),s(4,"Bienvenido"),o(),n(5,"p",4),s(6,"Inicia sesi\xF3n"),o(),n(7,"ion-item",5)(8,"ion-label",6),s(9,"Usuario"),o(),n(10,"ion-input",7),f("ngModelChange",function(r){return m(t.username,r)||(t.username=r),r}),o()(),n(11,"ion-item",5)(12,"ion-label",6),s(13,"Contrase\xF1a"),o(),n(14,"ion-input",8),f("ngModelChange",function(r){return m(t.password,r)||(t.password=r),r}),o()(),n(15,"ion-button",9),s(16," Iniciar Sesi\xF3n "),o(),n(17,"ion-button",10),p("click",function(){return t.register()}),s(18," Crear Usuario "),o()()()()),i&2&&(c(10),u("ngModel",t.username),c(4),u("ngModel",t.password))},dependencies:[O,y,_,w,v,P,C,S,T,k,E,I],styles:[".login-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:1rem;background:linear-gradient(135deg,#e0f7fa,#fff)}.login-wrapper[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:0 auto;padding:2rem;box-sizing:border-box}.login-title[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:700;color:#fff}.login-subtitle[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;margin-bottom:1.5rem;color:#e0f7fa}.input-item[_ngcontent-%COMP%]{--background: white;--padding-start: 12px;--highlight-color-focused: #006064;margin-bottom:1rem;border-radius:.5rem}ion-input[_ngcontent-%COMP%]{--padding-start: 12px;--color: black}ion-button[_ngcontent-%COMP%]{width:100%;margin-top:1rem;--background: #00796b;--border-radius: 8px}ion-button[_ngcontent-%COMP%]:last-of-type{--background: #004d40}.login-card[_ngcontent-%COMP%]{background-color:#1797a6;border-radius:16px;box-shadow:0 10px 30px #0000001a;padding:32px 24px;width:100%;max-width:420px;display:flex;flex-direction:column;gap:20px;text-align:center}h2[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;color:#fff;font-size:30px}p[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;color:#fff;font-size:25px}ion-item[_ngcontent-%COMP%]{--background: transparent;font-size:22px;font-family:Arial,Helvetica,sans-serif;color:#fff;--color: #ffffff;border:none}ion-button[_ngcontent-%COMP%]{width:100%;font-size:18px;--padding-start: 16px;--padding-end: 16px;--border-radius: 8px;--box-shadow: 0 4px 10px rgba(0, 0, 0, .2)}ion-button[_ngcontent-%COMP%]{display:block;width:100%;max-width:100%;margin:0 auto;font-size:18px;color:#000}ion-button[_ngcontent-%COMP%]::part(native){width:100%!important;display:block}.login-button[_ngcontent-%COMP%]{--background: #007bff;--color: #ffffff;--border-radius: 10px;margin-top:16px}.register-button[_ngcontent-%COMP%]{--background: transparent;--color: #ffffff;--border-radius: 10px;--border: 2px solid #ffffff;margin-top:8px}.register-button[_ngcontent-%COMP%]::part(native){border:2px solid white!important}ion-input[_ngcontent-%COMP%]::part(native){font-size:16px;padding:10px;border-radius:8px;width:100%}@media screen and (max-width: 480px){.login-wrapper[_ngcontent-%COMP%]{padding:1.5rem}ion-item.input-item[_ngcontent-%COMP%]{width:100%;margin-inline:0;padding-inline:0}ion-input[_ngcontent-%COMP%]::part(native){width:100%;box-sizing:border-box}}"]});let d=a;return d})();export{D as LoginPage};
